.equ LOCALID_SELPHY, 8

FiveIsland_ResortGorgeous_MapScripts::
	map_script MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE, FiveIsland_ResortGorgeous_OnWarp
	map_script MAP_SCRIPT_ON_FRAME_TABLE, FiveIsland_ResortGorgeous_OnFrame
	.byte 0

FiveIsland_ResortGorgeous_OnWarp::
	map_script_2 VAR_MAP_SCENE_FIVE_ISLAND_RESORT_GORGEOUS, 1, FiveIsland_ResortGorgeous_EventScript_TurnPlayerNorth
	.2byte 0

FiveIsland_ResortGorgeous_EventScript_TurnPlayerNorth::
	turnobject OBJ_EVENT_ID_PLAYER, DIR_NORTH
	end

FiveIsland_ResortGorgeous_OnFrame::
	map_script_2 VAR_MAP_SCENE_FIVE_ISLAND_RESORT_GORGEOUS, 1, FiveIsland_ResortGorgeous_EventScript_SelphyReturnHomeScene
	.2byte 0

FiveIsland_ResortGorgeous_EventScript_SelphyReturnHomeScene::
	lockall
	textcolor NPC_TEXT_COLOR_FEMALE
	msgbox FiveIsland_ResortGorgeous_Text_SelphyThanksYouMayGoNow
	closemessage
	applymovement LOCALID_SELPHY, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	opendoor 39, 8
	waitdooranim
	applymovement LOCALID_SELPHY, FiveIsland_ResortGorgeous_Movement_SelphyEnterHome
	waitmovement 0
	closedoor 39, 8
	waitdooranim
	removeobject LOCALID_SELPHY
	clearflag FLAG_HIDE_RESORT_GORGEOUS_INSIDE_SELPHY
	setvar VAR_MAP_SCENE_FIVE_ISLAND_RESORT_GORGEOUS, 2
	releaseall
	end

FiveIsland_ResortGorgeous_Movement_SelphyEnterHome::
	walk_up
	set_invisible
	step_end

FiveIsland_ResortGorgeous_EventScript_SelphysHouseSign::
	msgbox FiveIsland_ResortGorgeous_Text_SelphysHouse, MSGBOX_SIGN
	end

FiveIsland_ResortGorgeous_EventScript_Cynthia::
	trainerbattle_single TRAINER_CYNTHIA, FiveIsland_ResortGorgeous_Text_CynthiaIntro, FiveIsland_ResortGorgeous_Text_CynthiaDefeat, FiveIsland_ResortGorgeous_EventScript_DefeatedCynthia, NO_MUSIC
	goto_if_unset FLAG_GOT_GIBLE_FROM_CYNTHIA, FiveIsland_ResortGorgeous_EventScript_Gible
	msgbox FiveIsland_ResortGorgeous_Text_CynthiaPostBattle
	release
	end

FiveIsland_ResortGorgeous_EventScript_DefeatedCynthia::
	goto FiveIsland_ResortGorgeous_EventScript_Gible
	end	

FiveIsland_ResortGorgeous_EventScript_Gible::
	msgbox FiveIsland_ResortGorgeous_Text_CynthiaWantsToGiveGible
	setvar VAR_TEMP_1, SPECIES_GIBLE
	givemon SPECIES_GIBLE, 5
	goto_if_eq VAR_RESULT, 0, FiveIsland_ResortGorgeous_EventScript_ReceiveGibleParty
	goto_if_eq VAR_RESULT, 1, FiveIsland_ResortGorgeous_EventScript_ReceiveGiblePC
	goto_if_eq VAR_RESULT, 2, EventScript_NoMoreRoomForPokemon
	release
	end
	
FiveIsland_ResortGorgeous_EventScript_ReceiveGibleParty::
	playfanfare MUS_LEVEL_UP
	message FiveIsland_ResortGorgeous_Text_ObtainedGibleFromCynthia
	waitmessage
	waitfanfare
	bufferspeciesname STR_VAR_1, SPECIES_GIBLE
	msgbox Text_GiveNicknameToThisMon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, FiveIsland_ResortGorgeous_EventScript_EndReceiveGible
	call EventScript_GetGiftMonPartySlot
	call EventScript_ChangePokemonNickname
	goto FiveIsland_ResortGorgeous_EventScript_EndReceiveGible
	end

FiveIsland_ResortGorgeous_EventScript_ReceiveGiblePC::
	playfanfare MUS_LEVEL_UP
	message FiveIsland_ResortGorgeous_Text_ObtainedGibleFromCynthia
	waitmessage
	waitfanfare
	bufferspeciesname STR_VAR_1, SPECIES_GIBLE
	msgbox Text_GiveNicknameToThisMon, MSGBOX_YESNO
	goto_if_eq VAR_RESULT, NO, FiveIsland_ResortGorgeous_EventScript_GibleTransferredToPC
	call EventScript_NameReceivedBoxMon
	goto FiveIsland_ResortGorgeous_EventScript_GibleTransferredToPC
	end

FiveIsland_ResortGorgeous_EventScript_GibleTransferredToPC::
	call EventScript_TransferredToPC
	goto FiveIsland_ResortGorgeous_EventScript_EndReceiveGible
	end

FiveIsland_ResortGorgeous_EventScript_EndReceiveGible::
	msgbox FiveIsland_ResortGorgeous_Text_ExplainGible
	setflag FLAG_GOT_GIBLE_FROM_CYNTHIA
	release
	end

FiveIsland_ResortGorgeous_EventScript_NotNow::
	msgbox FiveIsland_ResortGorgeous_Text_NotNow
	release
	end
